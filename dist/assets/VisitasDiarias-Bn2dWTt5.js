import{m as E,r as n,o as D,B,b as c,d as u,e,i as g,w as p,v as x,t as b,F as N,h as T,k as $,p as _}from"./index-DQ8DLb2k.js";const z={class:"visitas-container py-4 px-3 px-md-5"},I={class:"formulario shadow-sm p-4 rounded-4 bg-white mb-4"},L={class:"mb-3"},O={class:"mb-3"},j={key:0,class:"d-flex flex-column flex-md-row gap-3 mb-4"},F={key:1,class:"listado-visitas shadow-sm p-3 rounded-4 bg-white"},J={class:"list-group"},M={class:"texto-visita mb-2 mb-md-0"},R={class:"d-flex gap-2"},U=["onClick"],A=["onClick"],q={__name:"VisitasDiarias",setup(G){const i=E(),o=n(""),l=n(""),s=n([]),d=n(!1),v=n(null);D(()=>{const t=localStorage.getItem("visitas_diarias");t&&(s.value=JSON.parse(t))}),B(s,t=>{localStorage.setItem("visitas_diarias",JSON.stringify(t))},{deep:!0});function h(){if(!o.value.trim()){i.error("Por favor, ingresa el lugar de visita.");return}d.value?(s.value[v.value]={lugar:o.value.trim(),observacion:l.value.trim()||"Sin observaciones"},i.success("âœï¸ Visita actualizada correctamente."),k()):(s.value.push({lugar:o.value.trim(),observacion:l.value.trim()||"Sin observaciones"}),i.success("âœ… Visita agregada correctamente."),f())}function w(t){const a=s.value[t];o.value=a.lugar,l.value=a.observacion,d.value=!0,v.value=t,i.info("âœï¸ Editando visita...")}function k(){f(),d.value=!1,v.value=null}function f(){o.value="",l.value=""}function C(t){_.confirm("âŒ Eliminar visita",`Â¿Deseas eliminar la visita a "${s.value[t].lugar}"?`,()=>{s.value.splice(t,1),i.success("ðŸ—‘ï¸ Visita eliminada.")},()=>{i.info("âŒ Cancelado")}).set({labels:{ok:"SÃ­, eliminar",cancel:"Cancelar"},transition:"zoom",movable:!1})}const V=()=>{if(!s.value.length){i.info("No hay visitas para borrar.");return}_.confirm("ðŸ§¹ Borrar todas las visitas",`Se eliminarÃ¡n ${s.value.length} visitas registradas. Esta acciÃ³n no se puede deshacer.`,()=>{s.value=[],localStorage.removeItem("visitas_diarias"),i.success("âœ… Todas las visitas fueron eliminadas correctamente.")},()=>{i.info("âŒ Cancelado")}).set({labels:{ok:"SÃ­, borrar",cancel:"Cancelar"},transition:"zoom",movable:!1})};function y(){new Date().toLocaleDateString("es-EC",{day:"2-digit",month:"long",year:"numeric"});const t=[...s.value.map(a=>`${a.lugar}: ${a.observacion}.`)].join(`
`);navigator.clipboard.writeText(t).then(()=>{i.success("ðŸ“‹ Reporte copiado al portapapeles.")})}return(t,a)=>(u(),c("div",z,[a[5]||(a[5]=e("h2",{class:"titulo text-center mb-4"},"Registro de Visitas Diarias",-1)),e("div",I,[e("div",L,[a[2]||(a[2]=e("label",{class:"form-label fw-semibold"},"Lugar de visita",-1)),p(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=r=>o.value=r),class:"form-control campo-texto",rows:"1",placeholder:""},null,512),[[x,o.value]])]),e("div",O,[a[3]||(a[3]=e("label",{class:"form-label fw-semibold"},"ObservaciÃ³n",-1)),p(e("textarea",{"onUpdate:modelValue":a[1]||(a[1]=r=>l.value=r),class:"form-control campo-texto",rows:"3",placeholder:""},null,512),[[x,l.value]])]),e("button",{class:"btn-agregar w-100",onClick:h},b(d.value?"ðŸ’¾ Guardar cambios":"âž• Agregar visita"),1)]),s.value.length?(u(),c("div",j,[e("button",{class:"btn-accion copiar w-100",onClick:y}," ðŸ“‹ Copiar reporte "),e("button",{class:"btn-accion borrar w-100",onClick:V}," ðŸ—‘ï¸ Borrar todo ")])):g("",!0),s.value.length?(u(),c("div",F,[a[4]||(a[4]=e("h5",{class:"fw-bold mb-3 text-secondary"},"ðŸ“‹ Visitas registradas",-1)),e("ul",J,[(u(!0),c(N,null,T(s.value,(r,m)=>(u(),c("li",{key:m,class:"list-group-item d-flex justify-content-between align-items-start flex-column flex-md-row"},[e("div",M,[e("strong",null,b(r.lugar),1),$(": "+b(r.observacion),1)]),e("div",R,[e("button",{class:"btn-editar",onClick:S=>w(m)}," âœï¸ Editar ",8,U),e("button",{class:"btn-eliminar",onClick:S=>C(m)}," âœ– Eliminar ",8,A)])]))),128))])])):g("",!0)]))}};export{q as default};
