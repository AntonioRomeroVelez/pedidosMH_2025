import{r as x,o as V,u as k,b as p,d as v,e as o,g as u,j as c,a as f,w as D,v as E,t as i,f as l,l as S}from"./index-BrzviecL.js";import{a as b}from"./alertify-DPht8m50.js";const $={class:"container mt-5"},A={key:0,class:"card border-0 shadow-sm"},C={class:"card-body"},M={class:"row g-3 align-items-center mb-4"},R={class:"col-4"},F={class:"text-primary fw-bold mb-4"},j={class:"row g-3"},B={class:"col-md-6"},J={class:"list-unstyled mb-0"},L={class:"col-md-6"},O={class:"list-unstyled mb-0"},T={class:"text-center mt-4 d-flex gap-3 align-content-center justify-content-center"},U={key:1,class:"text-center mt-5"},K={__name:"ProductoDetalleView",setup(z){const y=k(),N=S(),s=x(null),m=x("");V(()=>{const a=JSON.parse(localStorage.getItem("ListaProductos")||"[]");s.value=a.find(t=>t.ID===y.params.id)});function _(a,t){if(!t)return a;const e=t.split(",").map(r=>r.trim());let n=0;for(const r of e){const[d,g]=r.split("+").map(w=>parseInt(w.trim()));if(isNaN(d)||isNaN(g)||d<=0||g<0)continue;const P=Math.floor(a/d)*g;P>n&&(n=P)}return a+n}const I=()=>{const a=parseInt(m.value);if(!a||a<1){b.error("âŒ Ingresa una cantidad vÃ¡lida antes de agregar.");return}const t=_(a,s.value.Promocion),e={...s.value,cantidad:a,unidadesEntregadas:t},n=JSON.parse(localStorage.getItem("carrito")||"[]"),r=n.findIndex(d=>d.ID===e.ID);r!==-1?(n[r].cantidad+=e.cantidad,n[r].unidadesEntregadas+=e.unidadesEntregadas,b.warning(`âš ï¸ Cantidad actualizada: "${e.NombreProducto}" x${n[r].cantidad} (entregados: ${n[r].unidadesEntregadas})`)):(n.push(e),b.success(`âœ… Producto agregado: "${e.NombreProducto}" x${e.cantidad} (entregados: ${e.unidadesEntregadas})`)),localStorage.setItem("carrito",JSON.stringify(n)),N.push("/Productos")};return(a,t)=>{const e=f("center"),n=f("RouterLink"),r=f("router-link");return v(),p("div",$,[s.value?(v(),p("div",A,[o("div",C,[o("div",M,[u(e,null,{default:c(()=>[...t[1]||(t[1]=[o("label",{for:"cantidad",class:"form-label fw-semibold"},"Cantidad",-1)])]),_:1}),o("div",R,[D(o("input",{type:"number",min:"1","onUpdate:modelValue":t[0]||(t[0]=d=>m.value=d),class:"form-control py-2 fs-1 text text-center",id:"cantidad",placeholder:"0"},null,512),[[E,m.value]])]),o("div",{class:"col-8"},[o("button",{class:"btn btn-lg btn-primary w-100 w-md-auto",onClick:I}," ðŸ›’ Agregar al carrito ")])]),o("h3",F," ðŸ§ª "+i(s.value.NombreProducto),1),o("div",j,[o("div",B,[o("ul",J,[o("li",null,[t[2]||(t[2]=o("strong",null,"ðŸ“¦ PresentaciÃ³n:",-1)),l(" "+i(s.value.Presentacion),1)]),o("li",null,[t[3]||(t[3]=o("strong",null,"ðŸ§¬ Principio Activo:",-1)),l(" "+i(s.value.PrincipioActivo),1)]),o("li",null,[t[4]||(t[4]=o("strong",null,"ðŸ·ï¸ Marca:",-1)),l(" "+i(s.value.Marca),1)]),o("li",null,[t[5]||(t[5]=o("strong",null,"ðŸ§¾ IVA:",-1)),l(" "+i(s.value.IVA>0?s.value.IVA+"%":"No aplica"),1)])])]),o("div",L,[o("ul",O,[o("li",null,[t[6]||(t[6]=o("strong",null,"ðŸ’Š Precio Farmacia:",-1)),l(" $"+i(s.value.PrecioFarmacia.toFixed(2)),1)]),o("li",null,[t[7]||(t[7]=o("strong",null,"ðŸ’° PVP:",-1)),l(" $"+i(s.value.PVP.toFixed(2)),1)]),o("li",null,[t[8]||(t[8]=o("strong",null,"ðŸŽ PromociÃ³n:",-1)),l(" "+i(s.value.Promocion||"Sin promociÃ³n"),1)]),o("li",null,[t[9]||(t[9]=o("strong",null,"ðŸ”» Descuento:",-1)),l(" "+i(s.value.Descuento)+"%",1)])])])]),t[12]||(t[12]=o("hr",{class:"my-4"},null,-1)),o("div",T,[u(n,{class:"btn btn-warning px-5",to:"/Productos"},{default:c(()=>[...t[10]||(t[10]=[l(" ðŸ”™ Regresar ",-1)])]),_:1}),u(r,{class:"btn btn-info px-5",to:"/editar/"+s.value.ID},{default:c(()=>[...t[11]||(t[11]=[l(" âœï¸ Editar ",-1)])]),_:1},8,["to"])])])])):(v(),p("div",U,[t[14]||(t[14]=o("h4",{class:"text-danger"},"âŒ Producto no encontrado",-1)),u(n,{class:"btn btn-secondary mt-3",to:"/Productos"},{default:c(()=>[...t[13]||(t[13]=[l(" ðŸ”™ Volver al listado ",-1)])]),_:1})]))])}}};export{K as default};
