import{r as f,b as w,u as _,c as g,o as p,a as o,t as i,f as r,w as k,v as D,g as P,i as x,e as E,k as S}from"./index-DL7EVxNS.js";import{a as u}from"./alertify-DPht8m50.js";const $={class:"container mt-5"},A={key:0,class:"card border-0 shadow-sm"},C={class:"card-body"},M={class:"text-primary fw-bold mb-4"},R={class:"row g-3"},F={class:"col-md-6"},B={class:"list-unstyled mb-0"},J={class:"col-md-6"},L={class:"list-unstyled mb-0"},O={class:"d-flex flex-column align-items-center gap-3 mt-4"},j={class:"w-50"},T={class:"text-center mt-5"},U={key:1,class:"text-center mt-5"},K={__name:"ProductoDetalleView",setup(z){const b=_(),N=S(),n=f(null),c=f("");w(()=>{const e=parseInt(b.params.id),s=JSON.parse(localStorage.getItem("ListaProductos")||"[]").find(a=>a.ID===e);s?n.value=s:(n.value=null,u.error("âŒ Producto no encontrado."))});function y(e,t){if(!t)return e;const s=t.split(",").map(l=>l.trim());let a=0;for(const l of s){const[d,m]=l.split("+").map(V=>parseInt(V.trim()));if(isNaN(d)||isNaN(m)||d<=0||m<0)continue;const v=Math.floor(e/d)*m;v>a&&(a=v)}return e+a}const I=()=>{const e=parseInt(c.value);if(!e||e<1){u.error("âŒ Ingresa una cantidad vÃ¡lida antes de agregar.");return}const t=y(e,n.value.Promocion),s={...n.value,cantidad:e,unidadesEntregadas:t},a=JSON.parse(localStorage.getItem("carrito")||"[]"),l=a.findIndex(d=>d.ID===s.ID);l!==-1?(a[l].cantidad+=s.cantidad,a[l].unidadesEntregadas+=s.unidadesEntregadas,u.warning(`âš ï¸ Cantidad actualizada: "${s.NombreProducto}" x${a[l].cantidad} (entregados: ${a[l].unidadesEntregadas})`)):(a.push(s),u.success(`âœ… Producto agregado: "${s.NombreProducto}" x${s.cantidad} (entregados: ${s.unidadesEntregadas})`)),localStorage.setItem("carrito",JSON.stringify(a)),N.push("/Productos")};return(e,t)=>{const s=E("RouterLink");return p(),g("div",$,[n.value?(p(),g("div",A,[o("div",C,[o("h3",M," ðŸ§ª "+i(n.value.NombreProducto),1),o("div",R,[o("div",F,[o("ul",B,[o("li",null,[t[1]||(t[1]=o("strong",null,"ðŸ“¦ PresentaciÃ³n:",-1)),r(" "+i(n.value.Presentacion),1)]),o("li",null,[t[2]||(t[2]=o("strong",null,"ðŸ§¬ Principio Activo:",-1)),r(" "+i(n.value.PrincipioActivo),1)]),o("li",null,[t[3]||(t[3]=o("strong",null,"ðŸ·ï¸ Marca:",-1)),r(" "+i(n.value.Marca),1)]),o("li",null,[t[4]||(t[4]=o("strong",null,"ðŸ§¾ IVA:",-1)),r(" "+i(n.value.IVA>0?n.value.IVA+"%":"No aplica"),1)])])]),o("div",J,[o("ul",L,[o("li",null,[t[5]||(t[5]=o("strong",null,"ðŸ’Š Precio Farmacia:",-1)),r(" $"+i(n.value.PrecioFarmacia.toFixed(2)),1)]),o("li",null,[t[6]||(t[6]=o("strong",null,"ðŸ’° PVP:",-1)),r(" $"+i(n.value.PVP.toFixed(2)),1)]),o("li",null,[t[7]||(t[7]=o("strong",null,"ðŸŽ PromociÃ³n:",-1)),r(" "+i(n.value.Promocion||"Sin promociÃ³n"),1)]),o("li",null,[t[8]||(t[8]=o("strong",null,"ðŸ”» Descuento:",-1)),r(" "+i(n.value.Descuento)+"%",1)])])])]),t[11]||(t[11]=o("hr",{class:"my-4"},null,-1)),o("div",O,[o("div",j,[t[9]||(t[9]=o("label",{for:"cantidad",class:"form-label fw-semibold text-center d-block"},"Cantidad",-1)),k(o("input",{type:"number",min:"1","onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),class:"form-control text-center",id:"cantidad",placeholder:"Ej. 1"},null,512),[[D,c.value]])]),o("button",{class:"btn btn-lg btn-primary px-4",onClick:I}," ðŸ›’ Agregar al carrito ")]),o("div",T,[P(s,{class:"btn btn-danger px-5",to:"/Productos"},{default:x(()=>[...t[10]||(t[10]=[r(" ðŸ”™ Regresar al listado ",-1)])]),_:1})])])])):(p(),g("div",U,[t[13]||(t[13]=o("h4",{class:"text-danger"},"âŒ Producto no encontrado",-1)),P(s,{class:"btn btn-secondary mt-3",to:"/Productos"},{default:x(()=>[...t[12]||(t[12]=[r(" ðŸ”™ Volver al listado ",-1)])]),_:1})]))])}}};export{K as default};
