import{_ as k,m as w,u as N,c as D,n as S,r as b,o as V,a as _,b as i,d as u,e as o,w as E,v as $,t as r,k as n,g as m,j as g,p as A}from"./index-BlsfIA4-.js";import{c as C}from"./utility-CvRbycmg.js";const R={class:"container mt-5"},J={key:0,class:"card border-0 shadow-sm"},L={class:"card-body"},O={key:0},F={key:1,class:"row g-3 align-items-center mb-4"},M={class:"col-4"},T={class:"text-primary fw-bold mb-4"},j={class:"row g-3"},B={class:"col-md-6"},G={class:"list-unstyled mb-0"},q={class:"col-md-6"},z={class:"list-unstyled mb-0"},U={key:2},Y={class:"text-center mt-4 d-flex gap-3 align-content-center justify-content-center"},H={key:3},K={class:"text-center mt-4 d-flex gap-3 align-content-center justify-content-center"},Q={key:1,class:"text-center mt-5"},W={__name:"ProductoDetalleView",setup(X){const c=w(),p=N(),P=D(()=>p.query.modo||"ver"),f=S(),s=b(null),v=b("");V(()=>{const l=JSON.parse(localStorage.getItem("ListaProductos")||"[]");s.value=l.find(t=>t.ID===p.params.id)});const x=()=>{A.confirm("Â¿Eliminar producto?","Esta acciÃ³n no se puede deshacer.",()=>{const t=JSON.parse(localStorage.getItem("ListaProductos")||"[]").filter(e=>e.ID!==s.value.ID);localStorage.setItem("ListaProductos",JSON.stringify(t)),c.success("ðŸ—‘ï¸ Producto eliminado"),f.push("/Productos")},()=>{c.message("âŒ Cancelado")})},y=()=>{const l=parseInt(v.value);if(!l||l<1){c.error("âŒ Ingresa una cantidad vÃ¡lida antes de agregar.");return}const t=C(l,s.value.Promocion).total,e={...s.value,cantidad:l,unidadesEntregadas:t},a=JSON.parse(localStorage.getItem("carrito")||"[]"),d=a.findIndex(I=>I.ID===e.ID);d!==-1?(a[d].cantidad+=e.cantidad,a[d].unidadesEntregadas+=e.unidadesEntregadas,c.warning(`âš ï¸ Cantidad actualizada: "${e.NombreProducto}" x${a[d].cantidad} (entregados: ${a[d].unidadesEntregadas})`)):(a.push(e),c.success(`âœ… Producto agregado: "${e.NombreProducto}" x${e.cantidad} (entregados: ${e.unidadesEntregadas})`)),localStorage.setItem("carrito",JSON.stringify(a)),f.push("/Productos")};return(l,t)=>{const e=_("router-link"),a=_("RouterLink");return u(),i("div",R,[s.value?(u(),i("div",J,[o("div",L,[P.value==="gestionar"?(u(),i("div",O)):(u(),i("div",F,[o("div",M,[E(o("input",{type:"number",min:"1","onUpdate:modelValue":t[0]||(t[0]=d=>v.value=d),class:"form-control py-2 fs-1 text text-center",id:"cantidad",placeholder:"0"},null,512),[[$,v.value]])]),o("div",{class:"col-8"},[o("button",{class:"btn btn-lg btn-primary w-100 w-md-auto",onClick:y}," ðŸ›’ Agregar al carrito ")])])),o("h3",T," ðŸ§ª "+r(s.value.NombreProducto),1),o("div",j,[o("div",B,[o("ul",G,[o("li",null,[t[1]||(t[1]=o("strong",null,"ðŸ“¦ PresentaciÃ³n:",-1)),n(" "+r(s.value.Presentacion),1)]),o("li",null,[t[2]||(t[2]=o("strong",null,"ðŸ§¬ Principio Activo:",-1)),n(" "+r(s.value.PrincipioActivo),1)]),o("li",null,[t[3]||(t[3]=o("strong",null,"ðŸ·ï¸ Marca:",-1)),n(" "+r(s.value.Marca),1)]),o("li",null,[t[4]||(t[4]=o("strong",null,"ðŸ§¾ IVA:",-1)),n(" "+r(s.value.IVA>0?s.value.IVA+"%":"No aplica"),1)])])]),o("div",q,[o("ul",z,[o("li",null,[t[5]||(t[5]=o("strong",null,"ðŸ’Š Precio Farmacia:",-1)),n(" $"+r(s.value.PrecioFarmacia.toFixed(2)),1)]),o("li",null,[t[6]||(t[6]=o("strong",null,"ðŸ’° PVP:",-1)),n(" $"+r(s.value.PVP.toFixed(2)),1)]),o("li",null,[t[7]||(t[7]=o("strong",null,"ðŸŽ PromociÃ³n:",-1)),n(" "+r(s.value.Promocion||"Sin promociÃ³n"),1)]),o("li",null,[t[8]||(t[8]=o("strong",null,"ðŸ”» Descuento:",-1)),n(" "+r(s.value.Descuento)+"%",1)])])])]),t[12]||(t[12]=o("hr",{class:"my-4"},null,-1)),P.value==="gestionar"?(u(),i("div",U,[o("div",Y,[o("button",{class:"btn btn-danger px-2 sm",onClick:x}," ðŸ—‘ï¸ Eliminar "),m(e,{class:"btn btn-info px-2 sm",to:"/editar/"+s.value.ID},{default:g(()=>[...t[9]||(t[9]=[n(" âœï¸ Editar ",-1)])]),_:1},8,["to"]),m(a,{class:"btn btn-warning px-2 sm",to:"/Productos"},{default:g(()=>[...t[10]||(t[10]=[n(" ðŸ”™ Regresar ",-1)])]),_:1})])])):(u(),i("div",H,[o("div",K,[m(a,{class:"btn btn-warning px-2 sm",to:"/Productos"},{default:g(()=>[...t[11]||(t[11]=[n(" ðŸ”™ Regresar ",-1)])]),_:1})])]))])])):(u(),i("div",Q,[t[14]||(t[14]=o("h4",{class:"text-danger"},"âŒ Producto no encontrado",-1)),m(a,{class:"btn btn-secondary mt-3",to:"/Productos"},{default:g(()=>[...t[13]||(t[13]=[n(" ðŸ”™ Volver al listado ",-1)])]),_:1})]))])}}},tt=k(W,[["__scopeId","data-v-ec28f350"]]);export{tt as default};
