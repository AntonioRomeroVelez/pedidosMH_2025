import{_ as y,u as w,m as N,n as D,r as P,o as S,a as b,b as c,d as m,e as o,w as V,v as k,t as r,f as e,h as g,k as p,p as E}from"./index-RF-VxdaZ.js";import{c as $}from"./utility-BAyQKch2.js";const A={class:"container mt-5"},C={key:0,class:"card border-0 shadow-sm"},J={class:"card-body"},L={class:"row g-3 align-items-center mb-4"},O={class:"col-4"},R={class:"text-primary fw-bold mb-4"},F={class:"row g-3"},M={class:"col-md-6"},T={class:"list-unstyled mb-0"},B={class:"col-md-6"},G={class:"list-unstyled mb-0"},j={class:"text-center mt-4 d-flex gap-3 align-content-center justify-content-center"},z={key:1,class:"text-center mt-5"},U={__name:"ProductoDetalleView",setup(Y){const i=w(),f=N(),v=D(),s=P(null),u=P("");S(()=>{const l=JSON.parse(localStorage.getItem("ListaProductos")||"[]");s.value=l.find(t=>t.ID===f.params.id)});const x=()=>{E.confirm("¿Eliminar producto?","Esta acción no se puede deshacer.",()=>{const t=JSON.parse(localStorage.getItem("ListaProductos")||"[]").filter(a=>a.ID!==s.value.ID);localStorage.setItem("ListaProductos",JSON.stringify(t)),i.success("🗑️ Producto eliminado"),v.push("/Productos")},()=>{i.message("❌ Cancelado")})},_=()=>{const l=parseInt(u.value);if(!l||l<1){i.error("❌ Ingresa una cantidad válida antes de agregar.");return}const t=$(l,s.value.Promocion).total,a={...s.value,cantidad:l,unidadesEntregadas:t},n=JSON.parse(localStorage.getItem("carrito")||"[]"),d=n.findIndex(I=>I.ID===a.ID);d!==-1?(n[d].cantidad+=a.cantidad,n[d].unidadesEntregadas+=a.unidadesEntregadas,i.warning(`⚠️ Cantidad actualizada: "${a.NombreProducto}" x${n[d].cantidad} (entregados: ${n[d].unidadesEntregadas})`)):(n.push(a),i.success(`✅ Producto agregado: "${a.NombreProducto}" x${a.cantidad} (entregados: ${a.unidadesEntregadas})`)),localStorage.setItem("carrito",JSON.stringify(n)),v.push("/Productos")};return(l,t)=>{const a=b("router-link"),n=b("RouterLink");return m(),c("div",A,[s.value?(m(),c("div",C,[o("div",J,[o("div",L,[o("div",O,[V(o("input",{type:"number",min:"1","onUpdate:modelValue":t[0]||(t[0]=d=>u.value=d),class:"form-control py-2 fs-1 text text-center",id:"cantidad",placeholder:"0"},null,512),[[k,u.value]])]),o("div",{class:"col-8"},[o("button",{class:"btn btn-lg btn-primary w-100 w-md-auto",onClick:_}," 🛒 Agregar al carrito ")])]),o("h3",R," 🧪 "+r(s.value.NombreProducto),1),o("div",F,[o("div",M,[o("ul",T,[o("li",null,[t[1]||(t[1]=o("strong",null,"📦 Presentación:",-1)),e(" "+r(s.value.Presentacion),1)]),o("li",null,[t[2]||(t[2]=o("strong",null,"🧬 Principio Activo:",-1)),e(" "+r(s.value.PrincipioActivo),1)]),o("li",null,[t[3]||(t[3]=o("strong",null,"🏷️ Marca:",-1)),e(" "+r(s.value.Marca),1)]),o("li",null,[t[4]||(t[4]=o("strong",null,"🧾 IVA:",-1)),e(" "+r(s.value.IVA>0?s.value.IVA+"%":"No aplica"),1)])])]),o("div",B,[o("ul",G,[o("li",null,[t[5]||(t[5]=o("strong",null,"💊 Precio Farmacia:",-1)),e(" $"+r(s.value.PrecioFarmacia.toFixed(2)),1)]),o("li",null,[t[6]||(t[6]=o("strong",null,"💰 PVP:",-1)),e(" $"+r(s.value.PVP.toFixed(2)),1)]),o("li",null,[t[7]||(t[7]=o("strong",null,"🎁 Promoción:",-1)),e(" "+r(s.value.Promocion||"Sin promoción"),1)]),o("li",null,[t[8]||(t[8]=o("strong",null,"🔻 Descuento:",-1)),e(" "+r(s.value.Descuento)+"%",1)])])])]),t[11]||(t[11]=o("hr",{class:"my-4"},null,-1)),o("div",j,[o("button",{class:"btn btn-danger px-2 sm",onClick:x}," 🗑️ Eliminar "),g(a,{class:"btn btn-info px-2 sm",to:"/editar/"+s.value.ID},{default:p(()=>[...t[9]||(t[9]=[e(" ✏️ Editar ",-1)])]),_:1},8,["to"]),g(n,{class:"btn btn-warning px-2 sm",to:"/Productos"},{default:p(()=>[...t[10]||(t[10]=[e(" 🔙 Regresar ",-1)])]),_:1})])])])):(m(),c("div",z,[t[13]||(t[13]=o("h4",{class:"text-danger"},"❌ Producto no encontrado",-1)),g(n,{class:"btn btn-secondary mt-3",to:"/Productos"},{default:p(()=>[...t[12]||(t[12]=[e(" 🔙 Volver al listado ",-1)])]),_:1})]))])}}},K=y(U,[["__scopeId","data-v-aa35aa55"]]);export{K as default};
