import{E as u}from"./jspdf.es.min-lJxk9_fL.js";import{_ as x,r as I,o as P,A as k,b as r,d as c,e as s,i as C,k as d,F as D,h as F,t as S}from"./index-B95D08oq.js";const A={class:"container py-5 page-container"},E={class:"card border-0 shadow-sm mb-4"},N={class:"card-body"},U={key:0,class:"row g-4"},J={class:"card shadow-sm h-100 border-0 position-relative hover-card"},V=["src"],B={class:"card-body text-center py-2"},G={class:"small text-muted text-truncate mb-0"},O=["onClick"],L={key:1,class:"alert alert-light border mt-4 text-center shadow-sm"},M={key:2,class:"mt-5 text-center"},R={__name:"ImagenesPDF",setup($){const n=I([]);P(()=>{const t=localStorage.getItem("imagenes_pdf");if(t)try{n.value=JSON.parse(t)}catch{n.value=[],localStorage.removeItem("imagenes_pdf")}}),k(n,t=>{localStorage.setItem("imagenes_pdf",JSON.stringify(t))},{deep:!0});const f=t=>{const e=Array.from(t.target.files);for(const a of e){const o=new FileReader;o.onload=i=>{n.value.push({id:crypto.randomUUID(),name:a.name,url:i.target.result})},o.readAsDataURL(a)}t.target.value=null},v=t=>{n.value.splice(t,1)},h=()=>{n.value=[],localStorage.removeItem("imagenes_pdf")},m=t=>new Promise(e=>{const a=new Image;a.onload=()=>e(a),a.src=t}),g=(t,e,a)=>{const o=Math.min(e/t.width,a/t.height);return{width:t.width*o,height:t.height*o}},w=async()=>{for(const[t,e]of n.value.entries()){const a=new u({unit:"mm",format:"a4",compress:!1}),o=await m(e.url),{width:i,height:l}=g(o,210,297);a.addImage(e.url,"JPEG",(210-i)/2,(297-l)/2,i,l),a.save(`imagen_${t+1}.pdf`)}},y=async()=>{if(!n.value.length)return;const t=new u({unit:"mm",format:"a4",compress:!1});for(let e=0;e<n.value.length;e++){const a=n.value[e],o=await m(a.url),{width:i,height:l}=g(o,210,297);t.addImage(a.url,"JPEG",(210-i)/2,(297-l)/2,i,l),e<n.value.length-1&&t.addPage()}t.save("todas_imagenes_A4.pdf")},_=async()=>{if(!n.value.length)return;const t=new u({unit:"mm",format:"a4",compress:!1});for(let o=0;o<n.value.length;o++){const i=n.value[o],l=await m(i.url),{width:p,height:b}=g(l,210,297);t.addImage(i.url,"JPEG",(210-p)/2,(297-b)/2,p,b),o<n.value.length-1&&t.addPage()}const e=t.output("bloburl"),a=window.open(e);a&&(a.onload=()=>{a.print()})};return(t,e)=>(c(),r("div",A,[e[8]||(e[8]=s("div",{class:"text-center mb-5"},[s("h2",{class:"fw-bold text-primary mb-2"},"üñ®Ô∏è Imprimir varias im√°genes"),s("p",{class:"text-muted mb-0"}," Carga tus im√°genes, revisa la vista previa y genera tus archivos PDF. ")],-1)),s("div",E,[s("div",N,[e[0]||(e[0]=s("h5",{class:"card-title text-secondary mb-3"},[s("i",{class:"bi bi-upload me-2"}),d("Agregar im√°genes ")],-1)),s("input",{type:"file",multiple:"",accept:"image/*",class:"form-control mb-2",onChange:f},null,32),e[1]||(e[1]=s("div",{class:"form-text"}," Puedes agregar m√°s im√°genes o eliminar las que ya no necesites. ",-1))])]),n.value.length?(c(),r("div",U,[(c(!0),r(D,null,F(n.value,(a,o)=>(c(),r("div",{key:a.id,class:"col-6 col-md-4 col-lg-3"},[s("div",J,[s("img",{src:a.url,class:"card-img-top p-2 bg-light",alt:"Vista previa"},null,8,V),s("div",B,[s("p",G,S(a.name),1)]),s("button",{"aria-label":"Eliminar imagen",class:"btn btn-sm btn-danger position-absolute top-0 end-0 m-1 rounded-circle",onClick:i=>v(o)},[...e[2]||(e[2]=[s("i",{class:"bi bi-x-lg"},null,-1)])],8,O)])]))),128))])):(c(),r("div",L,[...e[3]||(e[3]=[s("i",{class:"bi bi-images text-secondary fs-4 me-2"},null,-1),d(" No hay im√°genes cargadas actualmente. ",-1)])])),n.value.length?(c(),r("div",M,[s("div",{class:"actions mt-5 text-center"},[s("button",{onClick:w,class:"btn btn-primary"},[...e[4]||(e[4]=[s("i",{class:"bi bi-file-earmark-pdf me-2"},null,-1),d("Un PDF por imagen ",-1)])]),s("button",{onClick:y,class:"btn btn-success"},[...e[5]||(e[5]=[s("i",{class:"bi bi-collection me-2"},null,-1),d("Un solo PDF con todas ",-1)])]),s("button",{onClick:_,class:"btn btn-warning text-dark"},[...e[6]||(e[6]=[s("i",{class:"bi bi-printer me-2"},null,-1),d("Imprimir directamente ",-1)])]),s("button",{onClick:h,class:"btn btn-outline-danger"},[...e[7]||(e[7]=[s("i",{class:"bi bi-trash me-2"},null,-1),d("Vaciar todo ",-1)])])])])):C("",!0)]))}},j=x(R,[["__scopeId","data-v-8b763fd0"]]);export{j as default};
