import{r as b,o as V,u as k,b as m,d as g,e as o,g as p,i as v,a as x,w as A,v as D,t as i,f as l,k as S}from"./index-DrUNE8GD.js";import{a as f}from"./alertify-DPht8m50.js";const $={class:"container mt-5"},C={key:0,class:"card border-0 shadow-sm"},E={class:"card-body"},M={class:"row g-3 align-items-center mb-4"},F={class:"col-4"},R={class:"text-primary fw-bold mb-4"},B={class:"row g-3"},J={class:"col-md-6"},L={class:"list-unstyled mb-0"},O={class:"col-md-6"},T={class:"list-unstyled mb-0"},U={class:"text-center mt-4"},j={key:1,class:"text-center mt-5"},K={__name:"ProductoDetalleView",setup(z){const y=k(),N=S(),s=b(null),u=b("");V(()=>{const e=JSON.parse(localStorage.getItem("ListaProductos")||"[]");s.value=e.find(t=>t.ID===y.params.id)});function w(e,t){if(!t)return e;const a=t.split(",").map(r=>r.trim());let n=0;for(const r of a){const[d,c]=r.split("+").map(_=>parseInt(_.trim()));if(isNaN(d)||isNaN(c)||d<=0||c<0)continue;const P=Math.floor(e/d)*c;P>n&&(n=P)}return e+n}const I=()=>{const e=parseInt(u.value);if(!e||e<1){f.error("❌ Ingresa una cantidad válida antes de agregar.");return}const t=w(e,s.value.Promocion),a={...s.value,cantidad:e,unidadesEntregadas:t},n=JSON.parse(localStorage.getItem("carrito")||"[]"),r=n.findIndex(d=>d.ID===a.ID);r!==-1?(n[r].cantidad+=a.cantidad,n[r].unidadesEntregadas+=a.unidadesEntregadas,f.warning(`⚠️ Cantidad actualizada: "${a.NombreProducto}" x${n[r].cantidad} (entregados: ${n[r].unidadesEntregadas})`)):(n.push(a),f.success(`✅ Producto agregado: "${a.NombreProducto}" x${a.cantidad} (entregados: ${a.unidadesEntregadas})`)),localStorage.setItem("carrito",JSON.stringify(n)),N.push("/Productos")};return(e,t)=>{const a=x("center"),n=x("RouterLink");return g(),m("div",$,[s.value?(g(),m("div",C,[o("div",E,[o("div",M,[p(a,null,{default:v(()=>[...t[1]||(t[1]=[o("label",{for:"cantidad",class:"form-label fw-semibold"},"Cantidad",-1)])]),_:1}),o("div",F,[A(o("input",{type:"number",min:"1","onUpdate:modelValue":t[0]||(t[0]=r=>u.value=r),class:"form-control py-2 fs-1 text text-center",id:"cantidad",placeholder:"0"},null,512),[[D,u.value]])]),o("div",{class:"col-8"},[o("button",{class:"btn btn-lg btn-primary w-100 w-md-auto",onClick:I}," 🛒 Agregar al carrito ")])]),o("h3",R," 🧪 "+i(s.value.NombreProducto),1),o("div",B,[o("div",J,[o("ul",L,[o("li",null,[t[2]||(t[2]=o("strong",null,"📦 Presentación:",-1)),l(" "+i(s.value.Presentacion),1)]),o("li",null,[t[3]||(t[3]=o("strong",null,"🧬 Principio Activo:",-1)),l(" "+i(s.value.PrincipioActivo),1)]),o("li",null,[t[4]||(t[4]=o("strong",null,"🏷️ Marca:",-1)),l(" "+i(s.value.Marca),1)]),o("li",null,[t[5]||(t[5]=o("strong",null,"🧾 IVA:",-1)),l(" "+i(s.value.IVA>0?s.value.IVA+"%":"No aplica"),1)])])]),o("div",O,[o("ul",T,[o("li",null,[t[6]||(t[6]=o("strong",null,"💊 Precio Farmacia:",-1)),l(" $"+i(s.value.PrecioFarmacia.toFixed(2)),1)]),o("li",null,[t[7]||(t[7]=o("strong",null,"💰 PVP:",-1)),l(" $"+i(s.value.PVP.toFixed(2)),1)]),o("li",null,[t[8]||(t[8]=o("strong",null,"🎁 Promoción:",-1)),l(" "+i(s.value.Promocion||"Sin promoción"),1)]),o("li",null,[t[9]||(t[9]=o("strong",null,"🔻 Descuento:",-1)),l(" "+i(s.value.Descuento)+"%",1)])])])]),t[11]||(t[11]=o("hr",{class:"my-4"},null,-1)),o("div",U,[p(n,{class:"btn btn-warning px-5",to:"/Productos"},{default:v(()=>[...t[10]||(t[10]=[l(" Atras ",-1)])]),_:1})])])])):(g(),m("div",j,[t[13]||(t[13]=o("h4",{class:"text-danger"},"❌ Producto no encontrado",-1)),p(n,{class:"btn btn-secondary mt-3",to:"/Productos"},{default:v(()=>[...t[12]||(t[12]=[l(" 🔙 Volver al listado ",-1)])]),_:1})]))])}}};export{K as default};
