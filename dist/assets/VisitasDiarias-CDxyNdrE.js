import{m as E,r as n,o as D,B as $,b as c,d as u,e as a,i as g,w as p,v as h,t as b,F as B,h as N,k as T,p as w}from"./index-BU21frmg.js";const L={class:"visitas-container py-4 px-3 px-md-5"},z={class:"formulario shadow-sm p-4 rounded-4 bg-white mb-4"},I={class:"mb-3"},O={class:"mb-3"},j={key:0,class:"d-flex flex-column flex-md-row gap-3 mb-4"},F={key:1,class:"listado-visitas shadow-sm p-3 rounded-4 bg-white"},J={class:"list-group"},M={class:"texto-visita mb-2 mb-md-0"},R={class:"d-flex gap-2"},U=["onClick"],A=["onClick"],q={__name:"VisitasDiarias",setup(G){const i=E(),l=n(""),r=n(""),s=n([]),d=n(!1),v=n(null);D(()=>{const t=localStorage.getItem("visitas_diarias");t&&(s.value=JSON.parse(t))}),$(s,t=>{localStorage.setItem("visitas_diarias",JSON.stringify(t))},{deep:!0});function x(){if(!l.value.trim()){i.error("Por favor, ingresa el lugar de visita.");return}d.value?(s.value[v.value]={lugar:l.value.trim(),observacion:r.value.trim()||"Sin observaciones"},i.success("âœï¸ Visita actualizada correctamente."),C()):(s.value.push({lugar:l.value.trim(),observacion:r.value.trim()||"Sin observaciones"}),i.success("âœ… Visita agregada correctamente."),f())}function _(t){const e=s.value[t];l.value=e.lugar,r.value=e.observacion,d.value=!0,v.value=t,i.info("âœï¸ Editando visita...")}function C(){f(),d.value=!1,v.value=null}function f(){l.value="",r.value=""}function k(t){w.confirm("âŒ Eliminar visita",`Â¿Deseas eliminar la visita a "${s.value[t].lugar}"?`,()=>{s.value.splice(t,1),i.success("ðŸ—‘ï¸ Visita eliminada.")},()=>{i.info("âŒ Cancelado")}).set({labels:{ok:"SÃ­, eliminar",cancel:"Cancelar"},transition:"zoom",movable:!1})}const V=()=>{if(!s.value.length){i.info("No hay visitas para borrar.");return}w.confirm("ðŸ§¹ Borrar todas las visitas",`Se eliminarÃ¡n ${s.value.length} visitas registradas. Esta acciÃ³n no se puede deshacer.`,()=>{s.value=[],localStorage.removeItem("visitas_diarias"),i.success("âœ… Todas las visitas fueron eliminadas correctamente.")},()=>{i.info("âŒ Cancelado")}).set({labels:{ok:"SÃ­, borrar",cancel:"Cancelar"},transition:"zoom",movable:!1})};function y(){const e=[`${new Date().toLocaleDateString("es-EC",{day:"2-digit",month:"long",year:"numeric"})}`,"",...s.value.map(o=>` ${o.lugar.toLowerCase()}: ${o.observacion}.`)].join(`
`);navigator.clipboard.writeText(e).then(()=>{i.success("ðŸ“‹ Reporte copiado al portapapeles.")})}return(t,e)=>(u(),c("div",L,[e[5]||(e[5]=a("h2",{class:"titulo text-center mb-4"},"Registro de Visitas Diarias",-1)),a("div",z,[a("div",I,[e[2]||(e[2]=a("label",{class:"form-label fw-semibold"},"Lugar de visita",-1)),p(a("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),class:"form-control campo-texto",rows:"1",placeholder:""},null,512),[[h,l.value]])]),a("div",O,[e[3]||(e[3]=a("label",{class:"form-label fw-semibold"},"ObservaciÃ³n",-1)),p(a("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),class:"form-control campo-texto",rows:"3",placeholder:""},null,512),[[h,r.value]])]),a("button",{class:"btn-agregar w-100",onClick:x},b(d.value?"ðŸ’¾ Guardar cambios":"âž• Agregar visita"),1)]),s.value.length?(u(),c("div",j,[a("button",{class:"btn-accion copiar w-100",onClick:y}," ðŸ“‹ Copiar reporte "),a("button",{class:"btn-accion borrar w-100",onClick:V}," ðŸ—‘ï¸ Borrar todo ")])):g("",!0),s.value.length?(u(),c("div",F,[e[4]||(e[4]=a("h5",{class:"fw-bold mb-3 text-secondary"},"ðŸ“‹ Visitas registradas",-1)),a("ul",J,[(u(!0),c(B,null,N(s.value,(o,m)=>(u(),c("li",{key:m,class:"list-group-item d-flex justify-content-between align-items-start flex-column flex-md-row"},[a("div",M,[a("strong",null,b(o.lugar),1),T(": "+b(o.observacion),1)]),a("div",R,[a("button",{class:"btn-editar",onClick:S=>_(m)}," âœï¸ Editar ",8,U),a("button",{class:"btn-eliminar",onClick:S=>k(m)}," âœ– Eliminar ",8,A)])]))),128))])])):g("",!0)]))}};export{q as default};
